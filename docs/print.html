<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>OpenTelemetry Coffee Bar Course</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="opentelemetry.html"><strong aria-hidden="true">2.</strong> What is OpenTelemetry</a></li><li class="chapter-item expanded "><a href="libraries/index.html"><strong aria-hidden="true">3.</strong> OT Libraries for your applications</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="libraries/logs.html"><strong aria-hidden="true">3.1.</strong> Logs</a></li><li class="chapter-item expanded "><a href="libraries/metrics.html"><strong aria-hidden="true">3.2.</strong> Metrics</a></li><li class="chapter-item expanded "><a href="libraries/traces.html"><strong aria-hidden="true">3.3.</strong> Traces</a></li></ol></li><li class="chapter-item expanded "><a href="otelcol/index.html"><strong aria-hidden="true">4.</strong> OpenTelemetry Collector</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="otelcol/logs.html"><strong aria-hidden="true">4.1.</strong> Logs</a></li><li class="chapter-item expanded "><a href="otelcol/metrics.html"><strong aria-hidden="true">4.2.</strong> Metrics</a></li><li class="chapter-item expanded "><a href="otelcol/traces.html"><strong aria-hidden="true">4.3.</strong> Traces</a></li><li class="chapter-item expanded "><a href="otelcol/pipelines.html"><strong aria-hidden="true">4.4.</strong> Pipelines</a></li><li class="chapter-item expanded "><a href="otelcol/receivers.html"><strong aria-hidden="true">4.5.</strong> Receivers</a></li><li class="chapter-item expanded "><a href="otelcol/processors.html"><strong aria-hidden="true">4.6.</strong> Processors</a></li><li class="chapter-item expanded "><a href="otelcol/exporters.html"><strong aria-hidden="true">4.7.</strong> Exporters</a></li></ol></li><li class="chapter-item expanded "><a href="misc/thecoffeebar.html"><strong aria-hidden="true">5.</strong> The Coffee Bar application</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="Tracing/Tracing.html"><strong aria-hidden="true">5.1.</strong> Tracing Introduction</a></li><li class="chapter-item expanded "><a href="Tracing/Auto-InstrumentationintheCoffeeBarApp.html"><strong aria-hidden="true">5.2.</strong> Coffee Bar App Tracing Examples</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="misc/contributors.html">Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OpenTelemetry Coffee Bar Course</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/sumologic/the-coffee-bar" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="opentelemetry"><a class="header" href="#opentelemetry">OpenTelemetry</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libraries"><a class="header" href="#libraries">Libraries</a></h1>
<p>How to set up OT libraries to create signals:</p>
<ul>
<li><strong><a href="libraries/logs.html">Logs</a></strong> how to create logs</li>
<li><strong><a href="libraries/metrics.html">Metrics</a></strong> how to create metrics</li>
<li><strong><a href="libraries/traces.html">Traces</a></strong> how to create traces</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="logs"><a class="header" href="#logs">Logs</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="metrics"><a class="header" href="#metrics">Metrics</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="traces"><a class="header" href="#traces">Traces</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="opentelemetry-collector"><a class="header" href="#opentelemetry-collector">OpenTelemetry Collector</a></h1>
<p>How to set up OT libraries to create signals:</p>
<ul>
<li><strong><a href="otelcol/logs.html">Logs</a></strong> how to collect logs</li>
<li><strong><a href="otelcol/metrics.html">Metrics</a></strong> how to collect metrics</li>
<li><strong><a href="otelcol/traces.html">Traces</a></strong> how to collect traces</li>
<li><strong><a href="otelcol/pipelines.html">Pipelines</a></strong> configuration</li>
<li><strong><a href="otelcol/receivers.html">Receivers</a></strong> configuration</li>
<li><strong><a href="otelcol/processors.html">Processors</a></strong> configuration</li>
<li><strong><a href="otelcol/exporters.html">Exporters</a></strong> configuration</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="logs-1"><a class="header" href="#logs-1">Logs</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="metrics-1"><a class="header" href="#metrics-1">Metrics</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="traces-1"><a class="header" href="#traces-1">Traces</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pipelines"><a class="header" href="#pipelines">Pipelines</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="receivers"><a class="header" href="#receivers">Receivers</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="processors"><a class="header" href="#processors">Processors</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="exporters"><a class="header" href="#exporters">Exporters</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-coffee-bar"><a class="header" href="#the-coffee-bar">The Coffee Bar</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="opentelemetry-tracing"><a class="header" href="#opentelemetry-tracing">OpenTelemetry Tracing</a></h1>
<p>Traces track the progression of a single request, called a trace, as it is handled by services that make up an application. The request may be initiated by a user or an application. Distributed tracing is a form of tracing that traverses process, network and security boundaries. Each unit of work in a trace is called a span; a trace is a tree of spans. Spans are objects that represent the work being done by individual services or components involved in a request as it flows through a system. A span contains a span context, which is a set of globally unique identifiers that represent the unique request that each span is a part of. A span provides Request, Error and Duration (RED) metrics that can be used to debug availability as well as performance issues.
A trace contains a single root span which encapsulates the end-to-end latency for the entire request. You can think of this as a single logical operation, such as clicking a button in a web application to add a product to a shopping cart. The root span would measure the time it took from an end-user clicking that button to the operation being completed or failing (so, the item is added to the cart or some error occurs) and the result being displayed to the user. A trace is comprised of the single root span and any number of child spans, which represent operations taking place as part of the request. Each span contains metadata about the operation, such as its name, start and end timestamps, attributes, events, and status.
To create and manage spans in OpenTelemetry, the OpenTelemetry API provides the tracer interface. This object is responsible for tracking the active span in your process, and allows you to access the current span in order to perform operations on it such as adding attributes, events, and finishing it when the work it tracks is complete. One or more tracer objects can be created in a process through the tracer provider, a factory interface that allows for multiple tracers to be instantiated in a single process with different options.
References - https://opentelemetry.io/docs/concepts/data-sources/</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="auto-instrumentation-examples"><a class="header" href="#auto-instrumentation-examples">Auto-Instrumentation Examples</a></h1>
<h2 id="python-app"><a class="header" href="#python-app">Python app</a></h2>
<p>The python apps part of the framework are instrumented with <a href="https://opentelemetry-python.readthedocs.io/en/stable/examples/auto-instrumentation/README.html">OpenTelemetry-Python</a></p>
<p>For each of the application the-coffe-lover, the-coffee-bar, the-coffee-machine and the-cashdesk we execute <code>opentelemetry-auto-instrumentation python app_name -h</code>, e.g. opentelemetry-auto-instrumentation python the-coffee-bar -h. Configuration to the application can be provided by config file - example config file can be found in src/config/config.yaml or by application arguments.</p>
<p>More details in this <a href="https://github.com/SumoLogic/the-coffee-bar/tree/main/applications/python-the-coffee-bar-apps#readme">readme</a> </p>
<h2 id="ruby-app"><a class="header" href="#ruby-app">Ruby APP</a></h2>
<p>The ruby applications part of the framework are instrumented with <a href="https://github.com/open-telemetry/opentelemetry-ruby">OpenTelemetry-Ruby</a> </p>
<p>Each of the application machine-svc, water-svc, coffee-svc needs additional configuration - in this case everything is based on the environment variables.</p>
<p>For more <a href="https://github.com/SumoLogic/the-coffee-bar/tree/main/applications/ruby-the-coffee-bar-apps">details</a> </p>
<h2 id="dotnet-app"><a class="header" href="#dotnet-app">Dotnet app</a></h2>
<p>The ASP .NET Core application is auto-instrumented by OpenTelemetry-Dotnet.</p>
<p>In this situation the application requires some variables to be set 
Common</p>
<ul>
<li>SERVICE_NAME - defines the name of the service (calculator-svc by default)</li>
<li>EXPORTER - defines the span exporter (otlp, zipkin, jaeger, console - otlp by default)
Specific for OTLP Exporter</li>
<li>OTEL_EXPORTER_OTLP_ENDPOINT - defines the OTLP gRPC Collector Endpoint (e.g. http://localhost:4317)
Specific for Zipkin Exporter</li>
<li>OTEL_EXPORTER_ZIPKIN_ENDPOINT - defines the Zipkin HTTP Collector Endpoint (e.g. localhost:9411/api/v2/spans)</li>
</ul>
<p>For more <a href="https://github.com/SumoLogic/the-coffee-bar/tree/main/applications/dotnet-core-the-coffee-bar-app">details</a> </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contributors"><a class="header" href="#contributors">Contributors</a></h1>
<p>Created with ❤️ by <a href="https://sumologic.com">Sumo Logic</a> and contributors:</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
